# Chrome Extension: Slack メッセージ非表示

このリポジトリは、Slackチャンネルで `:done:` リアクションがついたメッセージを非表示にするChrome拡張機能です。

## 目次

- [概要](#概要)
- [機能](#機能)
- [インストール方法](#インストール方法)
- [使用方法](#使用方法)
- [技術的詳細](#技術的詳細)
- [開発者向け情報](#開発者向け情報)

## 概要

このChrome拡張機能は、Slackのチャンネルで `:done:` などのリアクションがついたメッセージを非表示または半透明にすることで、完了したタスクや既読のメッセージを視覚的に区別し、未対応のメッセージに集中できるようにします。

## 機能

- `:done:` リアクションがついたSlackメッセージを非表示または半透明表示
- 拡張機能アイコンのクリックで表示モードの切り替え
- 対応する絵文字バリエーション: `:done:`, `:done_1:`, `:done-1:`, `:done_ja:`, `:done_en:`
- Slackチャンネルのスクロールに対応し、新しく表示されたメッセージも自動的に処理

## インストール方法

1. このリポジトリをクローンまたはダウンロード
2. Chromeブラウザで `chrome://extensions/` を開く
3. 右上の「デベロッパーモード」をオンにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードしたリポジトリのフォルダを選択

## 使用方法

1. Slackのウェブアプリ（`https://app.slack.com/client/*`）を開く
2. 拡張機能のアイコンをクリックして、表示モードを切り替える
   - 通常モード: `:done:` リアクションがついたメッセージは半透明（30%の不透明度）
   - 集中モード: `:done:` リアクションがついたメッセージは完全に非表示

## 技術的詳細

この拡張機能は以下のファイルで構成されています：

- `manifest.json`: 拡張機能の設定ファイル
- `background.js`: バックグラウンドで動作し、拡張機能の状態管理とコンテンツスクリプトとの通信を担当
- `content_scripts.js`: Slack UIのDOM操作を行い、メッセージの表示/非表示を制御
- `images/`: 拡張機能のアイコン画像

### 対象となる絵文字

以下の絵文字リアクションが付いたメッセージが処理対象となります：

```javascript
const TARGET_EMOJIS = [
  ":done:",
  ":done_1:",
  ":done-1:",
  ":done_ja:",
  ":done_en:",
];
```

## 開発者向け情報

### コードの構造

- `background.js`: 
  - 拡張機能のインストール時、Slackページの読み込み時、拡張機能アイコンのクリック時にイベントをリッスン
  - セッションストレージを使用して表示モード（通常/集中）の状態を管理
  - コンテンツスクリプトにメッセージを送信して表示モードの切り替えを指示

- `content_scripts.js`:
  - Slack UIのDOMを操作してメッセージの表示/非表示を制御
  - MutationObserverを使用してSlackチャンネルのスクロールに対応
  - 対象の絵文字リアクションを検出し、メッセージの表示スタイルを変更

### 拡張方法

新しい絵文字を対象に追加する場合は、`content_scripts.js`の`TARGET_EMOJIS`配列に追加してください。

```javascript
const TARGET_EMOJIS = [
  ":done:",
  ":done_1:",
  ":done-1:",
  ":done_ja:",
  ":done_en:",
  // 新しい絵文字をここに追加
];
```
